# 支持自定义函数的简单计算器

是编译原理练习。

## 1 功能

### 1.1 包含

在C++中包含`src/AMI_Calcu.hpp`即可

### 1.2 接口

|接口|功能|
|:---:|:---:|
|`double etod(const std::string& _expr)`|将`_expr`中的表达式计算为双精度实数|
|`int etoi(const std::string& _expr)`|将`_expr`中的表达式计算为32为整数|

### 1.3 表达式

#### 1.3.1 常数

以下是可被接受的常数值类型：

1. 十进制数串，形如`123`, `114514`
2. `十进制数串.十进制数串`，形如`123.456`, `0.123`
3. `.十进制数串`，形如`.123`

#### 1.3.2 算符

以下是可被接受的运算符类型：

`+`, `-`, `*`, `/`, `\`, `%`, `(`, `)`, `,`

#### 1.3.3 科学计算函数

|函数|语法|功能|示例
|:---:|:---:|:---:|:---:|
|`sin`|`sin(double)`|返回参数的弧度-正弦值|`sin(3)`|
|`cos`|`cos(double)`|返回参数的弧度-余弦值|`cos(2)`|
|`pow`/`power`|`pow(double, double)`|返回第一参数的第二参数次幂|`pow(2,2)`|

#### 1.3.4 科学常数

##### 1.3.4.1 预处理常数

已定义的常数会在预处理阶段被展开为浮点值

##### 1.3.4.2 常数函数

### 1.4 错误处理

#### 1.4.1 错误信息

#### 1.4.2 错误返回值

|接口|错误返回值|
|:---:|:---:|
|`etod`|`NaN`|
|`etoi`|`0`|

## 2 实现